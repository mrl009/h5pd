webpackJsonp([56],{265:function(e,t,i){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=i(363),o=s(a),n=i(364),r=s(n),d=i(24),c=i(68),l=s(c),u=function(){function e($scope,Layer,Core,Util,RS,$state,$timeout,$cookieStore,$rootScope){(0,o.default)(this,e),this.$scope=$scope,this.$rootScope=$rootScope,this.layer=Layer,this.Core=Core,this.util=Util,this.$RS=RS,this.$state=$state,this.$timeout=$timeout,$scope.submit=this.submit.bind(this),$scope.getCode=this.getCode.bind(this),this.getCode(),$scope.data={username:"",bank_name:"",password:"",repwd:""},$scope.isFillForm=!0,$scope.data.agent_id=$cookieStore.get("intr")||"",$scope.is_agent_id=$cookieStore.get("intr")||!1,$scope.is_show_agent=void 0==this.$rootScope.IS_AGENT?1:this.$rootScope.IS_AGENT,$scope.is_show_code=void 0==this.$rootScope.ROVCODE?1:this.$rootScope.ROVCODE,$scope.is_show_bankname=void 0==this.$rootScope.IS_BANK_NAME?1:this.$rootScope.IS_BANK_NAME,$scope.rules={username:{required:!0,reg:/^[a-zA-Z0-9]{4,14}$/,message:"请输入4~14位会员账号"},password:{required:!0,reg:/^\w{6,12}$/,message:"密码必须为6~12位有效字符"},repwd:{required:!0,reg:/^\w{6,12}$/,message:"两次密码输入不一致!"},agent_id:{required:!1,reg:/^\d{1,10}$/,message:"邀请码不正确"},bank_name:{required:!1,reg:/^[\u4E00-\u9FA5]{2,14}(?:·[\u4E00-\u9FA5]{2,14})*$/,message:"姓名格式不正确"}},$scope.codeSrc="",$scope.token_private_key="",this.formatRule()}return(0,r.default)(e,[{key:"getCode",value:function(){var e=this;this.$RS.getCode().then(function(t){200==t.code&&(e.$scope.token_private_key=t.data.token_private_key,e.$scope.codeSrc=d.API+"/login/code?token_private_key="+t.data.token_private_key)})}},{key:"formatRule",value:function(){var e=this;e.$RS.getSystem().then(function(t){200==t.code&&(e.$scope.is_show_agent=t.data.is_agent,e.$rootScope.IS_AGENT=t.data.is_agent,e.$scope.is_show_code=t.data.register_open_verificationcode,e.$rootScope.ROVCODE=t.data.register_open_verificationcode,e.$rootScope.IS_BANK_NAME=t.data.register_open_username,e.$scope.is_show_bankname=t.data.register_open_username,1==t.data.strength_pwd&&(e.$scope.rules.password={required:!0,reg:/^(?![^a-zA-Z]+$)(?!\D+$).{6,12}/,message:"请输入6~12位密码,至少包含一个字母和一个数字,不能包含空格"}),2==t.data.is_agent&&(e.$scope.rules.agent_id={required:!0,reg:/^\d{1,10}$/,message:"仅限邀请注册,请输入邀请码"}),1==t.data.register_open_verificationcode&&(e.$scope.rules.code={required:!0,reg:/^\w{4}$/,message:"验证码不正确"}),1==t.data.register_open_username&&(e.$scope.rules.bank_name.required=!0),e.$scope.$watch("data",function(t){var i=!0;for(var s in e.$scope.rules)e.$scope.rules[s].required&&(i=i&&!!t[s]);e.$scope.isFillForm=i},!0))})}},{key:"submit",value:function(){var e=this;if(this.$scope.rules.repwd.reg=new RegExp(this.$scope.data.password,"i"),!e.Core.valiForm(e.$scope.data,e.$scope.rules))return!1;var t={username:this.$scope.data.username,bank_name:this.$scope.data.bank_name,pwd:this.$scope.data.password&&(0,l.default)(this.$scope.data.password),agent_id:this.$scope.data.agent_id,yzm:this.$scope.data.code,token_private_key:this.$scope.token_private_key};this.$RS.register(t).then(function(t){200==t.code?(e.Core.setToken(t.data.token),e.layer.toast("注册成功!",1,function(){e.Core.setCookie("from_register",1),e.$state.go("tabs.my")})):(e.layer.toast(t.msg),e.getCode())})}}]),e}();t.default=u},339:function(e,t){e.exports='<iheader> <back url=/tabs/home></back> <h1 class=title>注册</h1> <a class="icon pull-right" href=/tabs/home> <i class="icon iconfont icon-house fs26"></i> </a> </iheader> <content class=register> <form ng-submit=submit()> <div class=list-block> <ul> <li ng-if=is_show_agent> <div class=item-content> <div class=item-inner> <div class="item-title label fs16">邀请码</div> <div class=item-input> <input placeholder="{{is_show_agent == 1 ? \'可不填\' : \'必填\'}}" ng-model=data.agent_id ng-readonly=is_agent_id class=fs16> </div> </div> </div> </li> <li> <div class=item-content> <div class=item-inner> <div class="item-title label fs16">账号</div> <div class=item-input> <input class=fs16 placeholder=请输入4~14位会员账号 ng-model=data.username maxlength=14> </div> </div> </div> </li> <li> <div class=item-content> <div class=item-inner> <div class="item-title label fs16">密码</div> <div class=item-input> <input type=password placeholder=请输入6~12位会员密码 maxlength=12 ng-model=data.password class=fs16> </div> </div> </div> </li> <li> <div class=item-content> <div class=item-inner> <div class="item-title label fs16">密码</div> <div class=item-input> <input type=password placeholder=请输入重复密码 ng-model=data.repwd class=fs16 maxlength=12> </div> </div> </div> </li> <li ng-if=is_show_bankname> <div class=item-content> <div class=item-inner> <div class="item-title label fs16">真实姓名</div> <div class=item-input> <input class=fs16 placeholder=请输入真实姓名 ng-model=data.bank_name maxlength=14> </div> </div> </div> </li> <li ng-if=is_show_code> <div class=item-content> <div class=item-inner> <div class="item-title label fs16">验证码</div> <div class=item-input> <input type=text placeholder=请输入验证码 ng-model=data.code class=fs16 maxlength=4> </div> <img ng-src={{codeSrc}} class=code-img ng-click=getCode()> </div> </div> </li> </ul> <p class="register-tips fs12"> <i class="icon iconfont icon-dui main-color fs12"></i> 我已经满合法博彩年龄，且同意各项开户条约，" <a class=main-color href=/question/7>开户协议</a>" </p> <a class="tologin fs16 warn-color" href=/login/ > 已有账号? 立即登录 </a> </div> <button class="button-register fs16" ng-class="{true:\'main-w\', false:\'disabled-bg\' }[isFillForm]" type=submit>注册</button> </form> <div class="register-footer text-left"> <a href={{ONLINE_SERVICE}} target=_blank class="button-link fr fs12">遇到了问题？请联系客服。</a> </div> </content> '},363:function(e,t,i){"use strict";t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},364:function(e,t,i){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var a=i(365),o=s(a);t.default=function(){function e(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),(0,o.default)(e,s.key,s)}}return function(t,i,s){return i&&e(t.prototype,i),s&&e(t,s),t}}()},365:function(e,t,i){e.exports={default:i(366),__esModule:!0}},366:function(e,t,i){i(367);var s=i(11).Object;e.exports=function(e,t,i){return s.defineProperty(e,t,i)}},367:function(e,t,i){var s=i(15);s(s.S+s.F*!i(21),"Object",{defineProperty:i(20).f})}});