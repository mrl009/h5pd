webpackJsonp([62],{249:function(e,t,i){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=i(363),n=a(s),o=i(364),c=a(o),r=function(){function e($scope,Core,$timeout,Layer,$state,RS,$rootScope,CS){(0,n.default)(this,e),$scope.lock=!1,this.$timeout=$timeout,this.S=$scope,this.C=Core,this.CS=CS,this.L=Layer,this.$S=$state,this.RS=RS,this.$rootScope=$rootScope,$scope.isLogin=!!Core.getToken(),$scope.data={img:""},$scope.imgs=[],$scope.checkImgIndex=0,$scope.refresh=this.refresh.bind(this),$scope.uploadAvatar=this.uploadAvatar.bind(this),$scope.showWithdraw=this.showWithdraw.bind(this),$scope.showPhotos=this.showPhotos.bind(this),$scope.selectPicture=this.selectPicture.bind(this),$scope.jumpTo=this.jumpTo.bind(this),$scope.checkLogin=this.checkLogin.bind(this),this.init()}return(0,c.default)(e,[{key:"showPhotos",value:function(){var e=this;e.RS.getTouXiang().then(function(t){200==t.code&&(e.S.imgs=t.data,e.S.modal=e.L.confirmForm({title:"请选择头像",url:"change-photos.html",scope:e.S,confirm:function(){var t=e.S.imgs[e.S.checkImgIndex];e.S.data.img=t,e.RS.setDefaultPortrait(t).then(function(e){console.log(e)})}}))})}},{key:"selectPicture",value:function(e){e!=this.S.checkImgIndex&&(this.S.checkImgIndex=e)}},{key:"uploadAvatar",value:function(e){var t=this,i=e.target.files[0];if(i){if("undefined"==typeof FileReader)return void this.L.toast("浏览器版本过低!");if(!/image\/\w+/.test(i.type))return void this.L.toast("请确认上传图片格式为jpg或png!");if(i.size>1048576)return void this.L.toast("图片大小不能超过1M!");var a=new FormData;a.append("file",i),this.S.modal.hide();var s=this.L.loading();this.RS.upDataAvatar(a).then(function(e){200==e.status&&200==e.data.code&&(t.S.modal.remove(),s&&s.close(),t.init(),t.L.toast("头像更新成功!"))})}}},{key:"refresh",value:function(){var e=this,t=this;if(!this.S.lock){this.S.lock=!0,this.S.clicked="clicked",this.S.data.balance="正在刷新";var i=0;this.RS.getBalance(!1,{needLoading:!1}).then(function(t){"200"==t.code&&(i=e.C.thousandBitSeparator(t.data.balance.toFixed(2)))});var a=this.$timeout(function(){t.$timeout.cancel(a),t.S.data.balance=i,t.S.clicked=null,t.S.lock=!1},2e3)}}},{key:"checkLogin",value:function(e){this.C.getToken()||(e.preventDefault(),this.L.toast("请先登录!"))}},{key:"jumpTo",value:function(e,t,i){t=0!=t||t,i=""==i?"":i,t&&!this.S.isLogin?this.L.toast("请先登录"):""!=i?this.$S.go(e,{ret:i}):this.$S.go(e)}},{key:"init",value:function(){var e=this,t=this;t.S.isLogin&&(t.$timeout(function(){var e=t.C.getCookie("from_register");t.C.removeCookie("from_register"),1==e&&t.L.confirm({title:"请第一时间绑定收款方式",msg:"率先支持微信支付宝银行卡提款",cancelText:"知道了",yesText:"去绑定",yesFn:function(){t.$S.go("userCard")}})},500),t.RS.getBalance().then(function(e){200==e.code?(t.S.data=e.data,t.S.data.balance=t.C.thousandBitSeparator(e.data.balance.toFixed(2)),t.S.data.img=0==t.S.data.img?t.$rootScope.DEFAULT_IMG:t.S.data.img):t.S.isLogin=!1})),t.RS.getNotice().then(function(t){if(200==t.code){var i=t.data.is_new_notice;e.$rootScope.hasMemberNotice=i}})}},{key:"showWithdraw",value:function(){var e=this;if(!this.S.isLogin)return this.L.toast("请先登录"),!1;if(1!=this.S.data.binding||1!=this.S.data.bank_pwd)this.L.confirm({title:"请绑定收款方式",msg:"去绑定银行卡或微信支付宝",yesFn:function(){e.$S.go("userCard")}});else{var t=this.C.getToken();this.RS.getOutShow({token:t},"不缓存").then(function(t){200==t.code?(sessionStorage.setItem("drawState",""),e.$S.go("withdraw")):(e.L.toast(t.msg),sessionStorage.setItem("drawState",t.msg))})}}}]),e}();t.default=r},323:function(e,t){e.exports='<iheader> <h1 class=title>会员中心</h1> <a class="icon pull-right white" href=/set> <i class="icon iconfont icon-set"></i> </a> </iheader> <content class=my hastabs=true> <div class="member row main-bg white-text"> <div class="col col-25 member-head-div"> <div class="member-avatar ma-unlogin" ng-hide=isLogin> </div> <div class="member-avatar ma-login" ng-click=showPhotos() ng-show=isLogin style=background-image:url({{data.img}})> <span class=icon-vip> <span class="fs8 bold">VIP{{data.dengji}}</span> </span> </div> </div> <div class="col col-75 member-content"> <div class=member-btns-wrap ng-hide=isLogin> <a class="fs20 white-text" href=/login/ >登录</a> <span class=fs20> <span class=speactor-margin>/</span> </span> <a class="fs20 white-text" href=/register>注册</a> </div> <div class="member-btns-wrap less-mb" ng-show=isLogin> <p>{{data.username}} <a class="fs8 bold btn-bg-yellow m-l5 p3 warn-color" href=/activity/view/88 style="padding:.1rem .5rem;border-radius:4px">VIP{{data.dengji}}</a> </p> <p class=lh40> <span class=iconfont>&#xe62e;</span> <span class="m-l10 m-r10">{{data.balance}}</span> <span class=refresh-btn ng-class="{\'rotate-circle\': clicked==\'clicked\'}" ng-click=refresh() disabled=disabled> <i class="iconfont icon-shuaxin white-text"></i> </span> </p> </div> <div class="member-tc-wrap fs14"> <a class="warn-color text-center lh35 btn-bg-yellow m-r15" href=/topup>充值</a> <a ng-click=checkLogin($event) ng-if="isLogin && quick_recharge_url" href={{quick_recharge_url}} class="warn-color text-center lh35 btn-bg-yellow m-r15" target=_blank>快速充值</a> <a ng-click=showWithdraw() class="text-center lh35 btn-bg-red white-text m-r15">提现</a> <a class="warn-color text-center lh35 btn-bg-yellow" href=/inversion>额度转换</a> </div> </div> </div> <div class="row bg-white my-tabs-info fs14"> <a class="col col-25 text-center" href=/allOrder> <div class=icon-bet></div> 投注记录 </a> <a class="col col-25 text-center" href=/cashRecord/0> <div class=icon-account></div> 账户明细 </a> <a class="col col-25 text-center" href=/income> <div class=icon-topup></div> 充值记录 </a> <a class="col col-25 text-center" href=/payoutRecord> <div class=icon-pay></div> 提现记录 </a> </div> <div class="mt-8 bg-white my-items fs14 m-b10"> <a href=/userInfo> <div class=icon-user-info></div> 个人信息 </a> <a href=/profit> <div class=icon-profit></div> 今日盈亏 </a> <a href=/proxy> <div class=icon-proxy></div> 代理中心 </a> <a href=/bonus> <div class=icon-prize></div> 奖金详情 </a> <a href=/rule/ > <div class=icon-rule></div> 玩法规则 </a> <a href=/detailSet> <div class=icon-wanfa></div> 详细设定 </a> <a href=/notice> <div class="icon-notice re"> <i class="badge-qipao qipao ab" ng-show=hasMemberNotice></i> </div> <span>信息公告</span> </a> <a href=/favorite> <div class=icon-favorite></div> 我的收藏 </a> <a ng-href={{ONLINE_SERVICE}}> <div class=icon-service></div> 在线客服 </a> <a href=/qqService> <div class=icon-qq-service></div> QQ客服 </a> <a href=/set> <div class=icon-safety></div> 安全中心 </a> <a href=/share> <div class=icon-share></div> 分享朋友 </a> </div> </content> <script id=change-photos.html type=text/ng-template> <div class="img-box bg-white">\n       <div class="upload-photo text-center re">\n         <i class="iconfont block main-color">&#xe61d;</i>\n        <input class="ab" type="file"  capture="camera" accept="image/png,image/jpeg" multiple\n               file-up-load="uploadAvatar">\n        </div>\n         <div ng-repeat="img in imgs track by $index"\n              ng-click="selectPicture($index)">\n            <img ng-src="{{img}}"\n                 ng-class="{\'border-color\': $index == checkImgIndex}">\n        </div>\n    </div> <\/script> '},363:function(e,t,i){"use strict";t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},364:function(e,t,i){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var s=i(365),n=a(s);t.default=function(){function e(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),(0,n.default)(e,a.key,a)}}return function(t,i,a){return i&&e(t.prototype,i),a&&e(t,a),t}}()},365:function(e,t,i){e.exports={default:i(366),__esModule:!0}},366:function(e,t,i){i(367);var a=i(11).Object;e.exports=function(e,t,i){return a.defineProperty(e,t,i)}},367:function(e,t,i){var a=i(15);a(a.S+a.F*!i(21),"Object",{defineProperty:i(20).f})}});