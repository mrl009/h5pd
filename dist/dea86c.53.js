webpackJsonp([53],{269:function(t,e,s){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=s(363),n=a(i),c=s(364),o=a(c),r=[7,1,2,3,4,5,6],l=function(){function t($scope,RS,$state,Core,Layer,Util,DT){(0,n.default)(this,t),this.$scope=$scope,this.$RS=RS,this.$state=$state,this.Core=Core,this.Layer=Layer,this.$Util=Util,this.DT=DT,$scope.time_start=this.DT.dtToString(this.DT.addDays(new Date,"day",-1)),$scope.time_end=this.DT.dtToString(this.DT.addDays(new Date,"day",0)),$scope.total_now_price=0,$scope.total_rate_price=0,$scope.agentData={},$scope.dataSet=[],$scope.checkDate=this.checkDate.bind(this),$scope.setStart=this.setStart.bind(this),$scope.setEnd=this.setEnd.bind(this),$scope.getSheet=this.getSheet.bind(this),$scope.currentIndex=0,$scope.dateList=[{title:"昨天"},{title:"本周"},{title:"本月"},{title:"查询"}],this.init()}return(0,o.default)(t,[{key:"init",value:function(){this.checkAgent()}},{key:"checkAgent",value:function(){var t=this;this.$RS.getAuditStatus().then(function(e){200==e.code?(t.getSheet(),t.getAgentData(),t.getAgentSet()):t.Layer.toast(e.msg)})}},{key:"getSheet",value:function(){var t=this,e={time_start:this.$scope.time_start,time_end:this.$scope.time_end};return this.DT.addDays(e.time_start,"month",2)<this.DT.stringToDt(e.time_end)?void this.Layer.toast("日期范围不能超过2月!"):e.time_start>e.time_end?void this.Layer.toast("起始日期不能大于结束日期!"):void this.$RS.getSheet(e).then(function(e){200==e.code?(t.$scope.total_now_price=e.data[0].total_now_price,t.$scope.total_rate_price=e.data[0].total_rate_price):t.Layer.toast(e.msg)})}},{key:"getAgentData",value:function(){var t=this;this.$RS.getAgentData().then(function(e){200==e.code&&(t.$scope.agentData.off_sum=e.data.off_sum,t.$scope.agentData.date_sum=e.data.date_num)})}},{key:"getAgentSet",value:function(){var t=this;this.$RS.getAgentSet().then(function(e){200==e.code&&(t.$scope.dataSet=e.data)})}},{key:"setStart",value:function(t){var e=this;this.$Util.picker(t.target,function(t){e.$scope.time_start=t})}},{key:"setEnd",value:function(t){var e=this;this.$Util.picker(t.target,function(t){e.$scope.time_end=t})}},{key:"checkDate",value:function(t){switch(this.$scope.currentIndex=t,t){case 0:this.$scope.time_start=this.DT.dtToString(this.DT.addDays(new Date,"day",-1)),this.$scope.time_end=this.DT.dtToString(this.DT.addDays(new Date,"day",0));break;case 1:var e=-r[(new Date).getDay()];this.$scope.time_start=this.DT.dtToString(this.DT.addDays(new Date,"day",e)),this.$scope.time_end=this.DT.dtToString(this.DT.addDays(new Date,"day",0));break;case 2:var s=1-(new Date).getDate();this.$scope.time_start=this.DT.dtToString(this.DT.addDays(new Date,"day",s)),this.$scope.time_end=this.DT.dtToString(this.DT.addDays(new Date,"day",0));break;case 3:this.$scope.time_start="",this.$scope.time_end="";break;default:this.$scope.time_start="",this.$scope.time_end=""}this.getSheet()}}]),t}();e.default=l},343:function(t,e){t.exports='<iheader> <back></back> <h1 class=title>代理报表</h1> <a class="icon pull-right white fs14" href=/question/8> 代理说明 </a> </iheader> <content class=sheet class="fs14 sheet"> <div class="row main-bg"> <div class=col> <span class="block white text-center">{{agentData.off_sum||0}}</span> <span class="block fs12 text-center orange">会员数</span> </div> <span class="block block-line"></span> <div class=col> <span class="block white text-center">{{agentData.date_num||0}}</span> <span class="block fs12 text-center orange">今日注册</span> </div> </div> <div class="item row row-reset"> <div class=col-10> <span class=block>时间</span> </div> <div class=col-25> <input class=item-input-reset type=text readonly=readonly ng-model=time_start value={{time_start}} ng-click=setStart($event) /> </div> <div class="col-5 marg-x"> <span class=block>至</span> </div> <div class=col-25> <input class=item-input-reset type=text readonly=readonly ng-model=time_end value={{time_end}} ng-click=setEnd($event) /> </div> <div class="col-20 padding-left"> <button class="button-background button-search main-w" ng-click=getSheet()>搜索</button> </div> </div> <ul class=list-css-reset> <li class="item row item-css-reset main-bg"> <a class="col item-a fs18" ng-repeat="item in dateList" ng-class="{\'invert-active\':$index == currentIndex}" ng-click=checkDate($index)>{{item.title}}</a> </li> <li class="item row row-line"> <span class="col text-center col-bottom-border">总打码量</span> <span class="col text-center col-bottom-border main-color">{{total_now_price||\'0\'}}</span> </li> <li class="item row row-line"> <span class="col text-center col-bottom-border">总返佣</span> <span class="col text-center col-bottom-border main-color">{{total_rate_price||\'0\'}}</span> </li> </ul> <ul class="list-css-reset proxy-mode"> <li class="item row item-css-reset main-bg"> <span class=col>代理分成模式</span> </li> <li class="item row row-line" ng-repeat="item in dataSet"> <span class="col text-center col-bottom-border">{{item.name}}</span> <span class="col text-center col-bottom-border">{{item.bet_amount}}</span> <span class="col text-center col-bottom-border">{{item.rate}}%</span> </li> </ul> <p class="text-center explain">分成按每日结算，最终解释权为官方所有</p> </content> '},363:function(t,e,s){"use strict";e.__esModule=!0,e.default=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},364:function(t,e,s){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=s(365),n=a(i);e.default=function(){function t(t,e){for(var s=0;s<e.length;s++){var a=e[s];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),(0,n.default)(t,a.key,a)}}return function(e,s,a){return s&&t(e.prototype,s),a&&t(e,a),e}}()},365:function(t,e,s){t.exports={default:s(366),__esModule:!0}},366:function(t,e,s){s(367);var a=s(11).Object;t.exports=function(t,e,s){return a.defineProperty(t,e,s)}},367:function(t,e,s){var a=s(15);a(a.S+a.F*!s(21),"Object",{defineProperty:s(20).f})}});